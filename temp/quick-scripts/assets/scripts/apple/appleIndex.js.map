<<<<<<< HEAD
{"version":3,"sources":["appleIndex.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\apple","sourcesContent":["const { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NewClass extends cc.Component {\r\n\r\n    // 用户钱数\r\n    @property(cc.Label)\r\n    money: cc.Label = null;\r\n\r\n    // 投币\r\n    @property(cc.Node)\r\n    addConintBtn: cc.Node = null;\r\n\r\n    // 退币\r\n    @property(cc.Node)\r\n    backConintBtn: cc.Node = null;\r\n\r\n    // 刷新积分按钮\r\n    @property(cc.Node)\r\n    refreshMoney: cc.Node = null;\r\n\r\n    // 积分\r\n    @property(cc.Label)\r\n    integral: cc.Label = null;\r\n\r\n    // 初始化用户拥有钱数\r\n    userMoney: number = 100;\r\n\r\n    // 下注\r\n    addMoney: number = 0;\r\n\r\n    // 给转动的节点添加背景色\r\n    @property(cc.Prefab)\r\n    addBg: cc.Prefab = null;\r\n\r\n    // 每次转一个节点\r\n    num: number = 0;\r\n\r\n    // 转动速度\r\n    speed: number = 0.02;\r\n\r\n    // 转动圈数\r\n    turns: number = 0;\r\n\r\n    // 反函数k值\r\n    k: number = 2;\r\n\r\n    // 中奖号码\r\n    winnerNum: number = 10;\r\n\r\n    // 速度递减开启\r\n    speedCurd: boolean = false;\r\n\r\n    // 遮罩，开始游戏后不可点击\r\n    @property(cc.Node)\r\n    mask: cc.Node = null;\r\n\r\n    onLoad() {\r\n\r\n        this._addCoint();\r\n\r\n    }\r\n\r\n    start() {\r\n\r\n    }\r\n\r\n    // update (dt) {}\r\n    onDestroy() {\r\n        this._offAddCoint()\r\n    }\r\n\r\n    // 投币 or 退币 or 刷新积分\r\n    private _addCoint(): void {\r\n\r\n        // 加币\r\n        let node: cc.Node = cc.find(\"Canvas/allNode/center/centerMsg\");\r\n\r\n        // 投币\r\n        this.addConintBtn.on(\"touchstart\", this._getMoney, this);\r\n\r\n        // 退币\r\n        this.backConintBtn.on(\"touchstart\", this._getBackCoint, this);\r\n\r\n        // 刷新积分\r\n        this.refreshMoney.on(\"touchstart\", this._reFresh, this);\r\n\r\n        // 点击减一积分\r\n        let curd: cc.Node = node.getChildByName(\"alt2\");\r\n\r\n        curd.on(\"touchstart\", this._curdCoint, this);\r\n\r\n        // 点击积分加一\r\n        let add: cc.Node = node.getChildByName(\"alt3\");\r\n\r\n        add.on(\"touchstart\", this._addCoints, this);\r\n\r\n        // 1-6倍随机\r\n        let oneToSix: cc.Node = node.getChildByName(\"alt4\");\r\n\r\n        oneToSix.on(\"touchstart\", this._getOneToSixMoney, this)\r\n\r\n        // 8-13倍随机\r\n        let eightToThirteen: cc.Node = node.getChildByName(\"alt5\");\r\n\r\n        eightToThirteen.on(\"touchstart\", this._eight, this);\r\n\r\n        //  开始游戏\r\n        let playGame: cc.Node = node.getChildByName(\"start\");\r\n\r\n        playGame.on(\"touchstart\", this._beginGame, this);\r\n\r\n    }\r\n\r\n    // 注销所有监听事件\r\n    private _offAddCoint(): void {\r\n        // 加币\r\n        let node: cc.Node = cc.find(\"Canvas/allNode/center/centerMsg\");\r\n\r\n        // 投币\r\n        this.addConintBtn.off(\"touchstart\", this._getMoney, this);\r\n\r\n        // 退币\r\n        this.backConintBtn.off(\"touchstart\", this._getBackCoint, this);\r\n\r\n        // 刷新积分\r\n        this.refreshMoney.off(\"touchstart\", this._reFresh, this);\r\n\r\n        // 点击减一积分\r\n        let curd: cc.Node = node.getChildByName(\"alt2\");\r\n\r\n        curd.on(\"touchstart\", this._curdCoint, this);\r\n\r\n        // 点击积分加一\r\n        let add: cc.Node = node.getChildByName(\"alt3\");\r\n\r\n        add.on(\"touchstart\", this._addCoints, this);\r\n\r\n        // 1-6倍随机\r\n        let oneToSix: cc.Node = node.getChildByName(\"alt4\");\r\n\r\n        oneToSix.off(\"touchstart\", this._getOneToSixMoney, this)\r\n\r\n        // 8-13倍随机\r\n        let eightToThirteen: cc.Node = node.getChildByName(\"alt5\");\r\n\r\n        eightToThirteen.off(\"touchstart\", this._eight, this);\r\n\r\n        //  开始游戏\r\n        let playGame: cc.Node = node.getChildByName(\"start\");\r\n\r\n        playGame.off(\"touchstart\", this._beginGame, this);\r\n    }\r\n\r\n    // 点击减一积分\r\n    private _curdCoint(): void {\r\n\r\n        this._userMoneyAdd(1, 1, false)\r\n\r\n    }\r\n\r\n    // 点击积分加一\r\n    private _addCoints(): void {\r\n\r\n        this._userMoneyAdd(1, 1, true)\r\n\r\n    }\r\n\r\n    // 1-6倍随机\r\n    private _getOneToSixMoney(): void {\r\n\r\n        let num = +(Math.random() * 10 - 4).toFixed(0);\r\n\r\n        if (num < 0) {\r\n\r\n            this._getOneToSixMoney();\r\n\r\n            return\r\n\r\n        }\r\n\r\n        this._userMoneyAdd(num, num, true)\r\n\r\n    }\r\n\r\n    // 8-13倍随机\r\n    private _eight(): void {\r\n\r\n        let num1 = +(Math.random() * 20).toFixed(0);\r\n\r\n        if (num1 > 13 || num1 < 8) {\r\n\r\n            this._eight();\r\n\r\n            return;\r\n\r\n        }\r\n\r\n        this._userMoneyAdd(num1, num1, true)\r\n\r\n    }\r\n\r\n    // 开始游戏\r\n    private _beginGame(): void | boolean {\r\n\r\n        if (this.addMoney <= 0) {\r\n            alert(`请先兑换积分`)\r\n            return false;\r\n        }\r\n\r\n\r\n\r\n        // 开始游戏父节点\r\n        let node: cc.Node = cc.find(\"Canvas/allNode/center/allApple/right\");\r\n\r\n        // 添加背景色\r\n        let temp: cc.Node = cc.instantiate(this.addBg);\r\n\r\n        // 第一个节点\r\n        let satrt: cc.Node = node.children[0];\r\n\r\n        temp.parent = satrt;\r\n\r\n        this.schedule(this._scheduleFn, this.speed);\r\n\r\n        this.mask.active = true;\r\n\r\n    }\r\n\r\n    // 倒计时回调函数\r\n    private _scheduleFn(): void {\r\n\r\n        // 开始游戏父节点\r\n        let node: cc.Node = cc.find(\"Canvas/allNode/center/allApple/right\");\r\n\r\n        // 添加背景色\r\n        let temp: cc.Node = cc.instantiate(this.addBg);\r\n\r\n        temp.parent = node.children[this.num];\r\n\r\n        // 遍历查询将转过的从节点上删除 ， 给符合的添加背景色\r\n        for (let j = 0; j < node.children.length; j++) {\r\n\r\n            if (j === this.num) {\r\n\r\n                temp.parent = node.children[this.num];\r\n\r\n            } else {\r\n\r\n                if (node.children[j].getChildByName(\"addSprite\")) {\r\n\r\n                    let child = node.children[j].getChildByName(\"addSprite\");\r\n\r\n                    child.destroy()\r\n\r\n                }\r\n\r\n\r\n            }\r\n\r\n        }\r\n\r\n        this.num++;\r\n\r\n        if(this.speedCurd) {\r\n\r\n            this._remainingNum()\r\n\r\n        }\r\n\r\n        if (this.speedCurd && this.num === this.winnerNum)  {\r\n\r\n            this.unschedule(this._scheduleFn);\r\n\r\n            this.mask.active = false;\r\n\r\n            // 初始化所有数据\r\n            this.num = 0;\r\n\r\n            this.turns = 0;\r\n\r\n            this.speed = 0.02;\r\n\r\n            this.speedCurd = false;\r\n        }\r\n\r\n        if (this.num > 23) {\r\n\r\n            this.num = 0;\r\n\r\n            this.turns += 1;\r\n\r\n            // 转4圈之后速度减小\r\n            if (this.turns == 4) {\r\n\r\n                // this.turns = 0;\r\n\r\n                this.unschedule(this._scheduleFn);\r\n\r\n                this.speedCurd = true;\r\n\r\n                this.speed = 0.2;\r\n\r\n                // 重新执行一个新的定时器\r\n                this.schedule(this._scheduleFn, this.speed)\r\n\r\n            }\r\n        }\r\n    }\r\n\r\n    // 计算还有多少个完成，给一个函数，用来做减速\r\n    private _remainingNum(): void {\r\n\r\n        this.speed = this.k / (this.winnerNum - this.num);\r\n\r\n        cc.log(this.speed,555)\r\n\r\n        this.unschedule(this._scheduleFn)\r\n\r\n        // cc.log()\r\n        this.schedule(this._scheduleFn, this.speed)\r\n\r\n        cc.log('123', this.turns, this.speed, this.num, this.winnerNum)\r\n\r\n        /* if (this.num === this.winnerNum) {\r\n           \r\n            this.unschedule(this._scheduleFn);\r\n        } */\r\n\r\n    }\r\n\r\n    // 投币\r\n    private _getMoney(): void {\r\n\r\n        if (this.userMoney > 0) {\r\n\r\n            this.userMoney -= 10;\r\n\r\n            this.money.string = this.userMoney + '';\r\n\r\n            this.addMoney += 10;\r\n\r\n            this.integral.string = this.addMoney + '';\r\n\r\n            return\r\n        }\r\n\r\n        if (this.userMoney == 10) {\r\n\r\n            alert(\"余额不足\");\r\n\r\n            this.userMoney = 0;\r\n\r\n            this.money.string = this.userMoney + '';\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n    // 退币\r\n    private _getBackCoint(): void {\r\n\r\n        cc.log(`退币`)\r\n\r\n    }\r\n\r\n    // 刷新积分\r\n    private _reFresh(): void {\r\n\r\n        this.integral.string = 0 + 0 + \"\";\r\n\r\n        this.money.string = this.userMoney + this.addMoney + '';\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * \r\n     * @param oldMoney 用户钱数减少\r\n     * @param newMoney 积分增加\r\n     * @param addOrCurd true => 积分增加，钱数减少 false => 积分减少，钱数增加\r\n     */\r\n    private _userMoneyAdd(oldMoney: number, newMoney: number, addOrCurd: boolean): void {\r\n\r\n        if (addOrCurd) {\r\n\r\n            if (this.userMoney > 0 && this.userMoney > oldMoney) {\r\n\r\n                this.userMoney -= oldMoney;\r\n\r\n                this.money.string = this.userMoney + '';\r\n\r\n                this.addMoney += newMoney;\r\n\r\n                this.integral.string = this.addMoney + '';\r\n\r\n            }\r\n\r\n        } else {\r\n\r\n            if (this.userMoney > 0 && this.addMoney > 0) {\r\n\r\n                this.userMoney += oldMoney;\r\n\r\n                this.money.string = this.userMoney + '';\r\n\r\n                this.addMoney -= newMoney;\r\n\r\n                this.integral.string = this.addMoney + '';\r\n\r\n            }\r\n\r\n\r\n\r\n        }\r\n\r\n\r\n    }\r\n}"]}
=======
{"version":3,"sources":["appleIndex.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../assets/scripts/apple","sourcesContent":["\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class NewClass extends cc.Component {\n\n    // 用户钱数\n    @property(cc.Label)\n    money: cc.Label = null;\n\n    // 投币\n    @property(cc.Node)\n    addConintBtn: cc.Node = null;\n\n    // 退币\n    @property(cc.Node)\n    backConintBtn: cc.Node = null;\n\n    // 刷新积分按钮\n    @property(cc.Node)\n    refreshMoney: cc.Node = null;\n\n    // 积分\n    @property(cc.Label)\n    integral: cc.Label = null;\n\n    // 初始化用户拥有钱数\n    userMoney: number = 100;\n\n    // 下注\n    addMoney: number = 0;\n\n    // 给转动的节点添加背景色\n    @property(cc.Prefab)\n    addBg: cc.Prefab = null;\n\n    // 每次转一个节点\n    num: number = 0;\n\n    // 转动速度\n    speed: number = 0.02;\n\n    // 转动圈数\n    turns: number = 0;\n\n    // 反函数k值\n    k: number = 2;\n\n    // 中奖号码\n    winnerNum: number = 22;\n\n    // 速度递减开启\n    speedCurd: boolean = false;\n\n    // 遮罩，开始游戏后不可点击\n    @property(cc.Node)\n    mask: cc.Node = null;\n\n    onLoad() {\n\n        this._addCoint();\n\n    }\n\n    start() {\n\n    }\n\n    // update (dt) {}\n    onDestroy() {\n        this._offAddCoint()\n    }\n\n    // 投币 or 退币 or 刷新积分\n    private _addCoint(): void {\n\n        // 加币\n        let node: cc.Node = cc.find(\"Canvas/allNode/center/centerMsg\");\n\n        // 投币\n        this.addConintBtn.on(\"touchstart\", this._getMoney, this);\n\n        // 退币\n        this.backConintBtn.on(\"touchstart\", this._getBackCoint, this);\n\n        // 刷新积分\n        this.refreshMoney.on(\"touchstart\", this._reFresh, this);\n\n        // 点击减一积分\n        let curd: cc.Node = node.getChildByName(\"alt2\");\n\n        curd.on(\"touchstart\", this._curdCoint, this);\n\n        // 点击积分加一\n        let add: cc.Node = node.getChildByName(\"alt3\");\n\n        add.on(\"touchstart\", this._addCoints, this);\n\n        // 1-6倍随机\n        let oneToSix: cc.Node = node.getChildByName(\"alt4\");\n\n        oneToSix.on(\"touchstart\", this._getOneToSixMoney, this)\n\n        // 8-13倍随机\n        let eightToThirteen: cc.Node = node.getChildByName(\"alt5\");\n\n        eightToThirteen.on(\"touchstart\", this._eight, this);\n\n        //  开始游戏\n        let playGame: cc.Node = node.getChildByName(\"start\");\n\n        playGame.on(\"touchstart\", this._beginGame, this);\n\n    }\n\n    // 注销所有监听事件\n    private _offAddCoint(): void {\n        // 加币\n        let node: cc.Node = cc.find(\"Canvas/allNode/center/centerMsg\");\n\n        // 投币\n        this.addConintBtn.off(\"touchstart\", this._getMoney, this);\n\n        // 退币\n        this.backConintBtn.off(\"touchstart\", this._getBackCoint, this);\n\n        // 刷新积分\n        this.refreshMoney.off(\"touchstart\", this._reFresh, this);\n\n        // 点击减一积分\n        let curd: cc.Node = node.getChildByName(\"alt2\");\n\n        curd.on(\"touchstart\", this._curdCoint, this);\n\n        // 点击积分加一\n        let add: cc.Node = node.getChildByName(\"alt3\");\n\n        add.on(\"touchstart\", this._addCoints, this);\n\n        // 1-6倍随机\n        let oneToSix: cc.Node = node.getChildByName(\"alt4\");\n\n        oneToSix.off(\"touchstart\", this._getOneToSixMoney, this)\n\n        // 8-13倍随机\n        let eightToThirteen: cc.Node = node.getChildByName(\"alt5\");\n\n        eightToThirteen.off(\"touchstart\", this._eight, this);\n\n        //  开始游戏\n        let playGame: cc.Node = node.getChildByName(\"start\");\n\n        playGame.off(\"touchstart\", this._beginGame, this);\n    }\n\n    // 点击减一积分\n    private _curdCoint(): void {\n\n        this._userMoneyAdd(1, 1, false)\n\n    }\n\n    // 点击积分加一\n    private _addCoints(): void {\n\n        this._userMoneyAdd(1, 1, true)\n\n    }\n\n    // 1-6倍随机\n    private _getOneToSixMoney(): void {\n\n        let num = +(Math.random() * 10 - 4).toFixed(0);\n\n        if (num < 0) {\n\n            this._getOneToSixMoney();\n\n            return\n\n        }\n\n        this._userMoneyAdd(num, num, true)\n\n    }\n\n    // 8-13倍随机\n    private _eight(): void {\n\n        let num1 = +(Math.random() * 20).toFixed(0);\n\n        if (num1 > 13 || num1 < 8) {\n\n            this._eight();\n\n            return;\n\n        }\n\n        this._userMoneyAdd(num1, num1, true)\n\n    }\n\n    // 开始游戏\n    private _beginGame(): void | boolean {\n\n        if (this.addMoney <= 0) {\n            alert(`请先兑换积分`)\n            return false;\n        }\n\n\n\n        // 开始游戏父节点\n        let node: cc.Node = cc.find(\"Canvas/allNode/center/allApple/right\");\n\n        // 添加背景色\n        let temp: cc.Node = cc.instantiate(this.addBg);\n\n        // 第一个节点\n        let satrt: cc.Node = node.children[0];\n\n        temp.parent = satrt;\n\n        this.schedule(this._scheduleFn, this.speed);\n\n        this.mask.active = true;\n\n    }\n\n    // 倒计时回调函数\n    private _scheduleFn(): void {\n\n        // 开始游戏父节点\n        let node: cc.Node = cc.find(\"Canvas/allNode/center/allApple/right\");\n\n        // 添加背景色\n        let temp: cc.Node = cc.instantiate(this.addBg);\n\n        temp.parent = node.children[this.num];\n\n        // 遍历查询将转过的从节点上删除 ， 给符合的添加背景色\n        for (let j = 0; j < node.children.length; j++) {\n\n            if (j === this.num) {\n\n                temp.parent = node.children[this.num];\n\n            } else {\n\n                if (node.children[j].getChildByName(\"addSprite\")) {\n\n                    let child = node.children[j].getChildByName(\"addSprite\");\n\n                    child.destroy()\n\n                }\n\n\n            }\n\n        }\n\n        this.num++;\n\n        if(this.speedCurd) {\n\n            this._remainingNum()\n\n        }\n\n        if (this.speedCurd && this.num === this.winnerNum)  {\n\n            this.unschedule(this._scheduleFn);\n\n            this.mask.active = false;\n\n            // 初始化所有数据\n            this.num = 0;\n\n            this.turns = 0;\n\n            this.speed = 0.02;\n\n            this.speedCurd = false;\n        }\n\n        if (this.num > 23) {\n\n            this.num = 0;\n\n            this.turns += 1;\n\n            // 转4圈之后速度减小\n            if (this.turns == 4) {\n\n                // this.turns = 0;\n\n                this.unschedule(this._scheduleFn);\n\n                this.speedCurd = true;\n\n                this.speed = 0.2;\n\n                // 重新执行一个新的定时器\n                this.schedule(this._scheduleFn, this.speed)\n\n            }\n        }\n    }\n\n    // 计算还有多少个完成，给一个函数，用来做减速\n    private _remainingNum(): void {\n\n        this.speed = this.k / (this.winnerNum - this.num);\n\n        cc.log(this.speed,555)\n\n        this.unschedule(this._scheduleFn)\n\n        // cc.log()\n        this.schedule(this._scheduleFn, this.speed)\n\n        cc.log('123', this.turns, this.speed, this.num, this.winnerNum)\n\n        /* if (this.num === this.winnerNum) {\n           \n            this.unschedule(this._scheduleFn);\n\n        } */\n\n    }\n\n    // 投币\n    private _getMoney(): void {\n\n        if (this.userMoney > 0) {\n\n            this.userMoney -= 10;\n\n            this.money.string = this.userMoney + '';\n\n            this.addMoney += 10;\n\n            this.integral.string = this.addMoney + '';\n\n            return\n        }\n\n        if (this.userMoney == 10) {\n\n            alert(\"余额不足\");\n\n            this.userMoney = 0;\n\n            this.money.string = this.userMoney + '';\n\n        }\n\n\n    }\n\n    // 退币\n    private _getBackCoint(): void {\n\n        cc.log(`退币`)\n\n    }\n\n    // 刷新积分\n    private _reFresh(): void {\n\n        this.integral.string = 0 + 0 + \"\";\n\n        this.money.string = this.userMoney + this.addMoney + '';\n\n    }\n\n\n    /**\n     * \n     * @param oldMoney 用户钱数减少\n     * @param newMoney 积分增加\n     * @param addOrCurd true => 积分增加，钱数减少 false => 积分减少，钱数增加\n     */\n    private _userMoneyAdd(oldMoney: number, newMoney: number, addOrCurd: boolean): void {\n\n        if (addOrCurd) {\n\n            if (this.userMoney > 0 && this.userMoney > oldMoney) {\n\n                this.userMoney -= oldMoney;\n\n                this.money.string = this.userMoney + '';\n\n                this.addMoney += newMoney;\n\n                this.integral.string = this.addMoney + '';\n\n            }\n\n        } else {\n\n            if (this.userMoney > 0 && this.addMoney > 0) {\n\n                this.userMoney += oldMoney;\n\n                this.money.string = this.userMoney + '';\n\n                this.addMoney -= newMoney;\n\n                this.integral.string = this.addMoney + '';\n\n            }\n\n\n\n        }\n\n\n    }\n}\n"]}
>>>>>>> 262f68e6f1a1245ca59dcbf233870b35c7ee1ba7
