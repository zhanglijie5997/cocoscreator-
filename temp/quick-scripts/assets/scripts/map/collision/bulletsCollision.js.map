{"version":3,"sources":["bulletsCollision.ts"],"names":[],"mappings":";;;;;AAAA,oDAA+C;AAC/C,gEAA2D;AAC3D,qDAAgD;AAE1C,IAAA,kBAAqC,EAAnC,oBAAO,EAAE,sBAAQ,CAAmB;AAG5C;IAA8C,oCAAI;IADlD;QAAA,qEA6GC;QA1GG,OAAO;QAEP,YAAM,GAAc,IAAI,CAAC;QAEzB,IAAI;QAEJ,YAAM,GAAc,IAAI,CAAC;QAEzB,UAAI,GAAU,EAAE,CAAC;QAEjB,qBAAe,GAAoB,IAAI,yBAAe,EAAE,CAAC;;IAgG7D,CAAC;IA9FG,iCAAM,GAAN;QACI,EAAE,CAAC,QAAQ,CAAC,mBAAmB,EAAE,CAAC,OAAO,GAAG,IAAI,CAAC;QACjD,6DAA6D;QAC7D,mEAAmE;QACnE,wCAAwC;IAC5C,CAAC;IAEO,yCAAc,GAAtB;QACI,kBAAQ,CAAC,GAAG,CAAC,YAAY,EAAE,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAA;IAC1D,CAAC;IAEO,qCAAU,GAAlB,UAAmB,GAAW;QAC1B,cAAc;QACd,kBAAkB;IACtB,CAAC;IAEK,2CAAgB,GAAtB,UAAuB,KAAU,EAAE,IAAS;uCAAG,OAAO;;;;;;6BAQ9C,KAAK,EAAL,wBAAK;wBAEL,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;wBAGjB,SAAO,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;wBAEvC,MAAI,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC;wBAEpB,CAAC,SAAA,EAAE,CAAC,SAAA,CAAC;wBAET,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE;4BAEnB,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;4BAExB,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;yBAE3B;wBAID,yCAAyC;wBAEzC,qBAAM,IAAI,CAAC,OAAO,CAAC,CAAC,EAAE,MAAI,CAAC,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,CAAC,GAAG,CAAC,EAAE,MAAI,CAAC,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,CAAC,GAAG,CAAC,EAAE,MAAI,CAAC,EAAA;;wBAF7G,yCAAyC;wBAEzC,SAA6G,CAAC;wBAE9G,IAAI,CAAC,YAAY,CAAC;4BAEd,MAAI,CAAC,OAAO,EAAE,CAAC;wBAEnB,CAAC,EAAE,CAAC,CAAC,CAAA;wBAEL,IAAI,CAAC,QAAQ,CAAC;4BACV,KAAI,CAAC,gBAAgB,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;4BACnC,cAAc;wBAClB,CAAC,EAAE,CAAC,CAAC,CAAA;;;wBAEL,IAAI,CAAC,UAAU,CAAC;4BACZ,KAAI,CAAC,gBAAgB,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;4BACnC,cAAc;wBAClB,CAAC,CAAC,CAAA;;;;;;KAeT;IAED,0CAAe,GAAf,UAAgB,KAAU,EAAE,IAAS;QACjC,oBAAoB;IACxB,CAAC;IACD,gCAAK,GAAL,cAAU,CAAC;IACX,iCAAM,GAAN,UAAO,EAAU;IAEjB,CAAC;IACD,oCAAS,GAAT;IAGA,CAAC;IApGD;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;oDACK;IAIzB;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;oDACK;IARR,gBAAgB;QADpC,OAAO;OACa,gBAAgB,CA4GpC;IAAD,uBAAC;CA5GD,AA4GC,CA5G6C,cAAI,GA4GjD;kBA5GoB,gBAAgB","file":"","sourceRoot":"../../../../../../assets/scripts/map/collision","sourcesContent":["import Move from \"../../../src/base/move/Move\";\nimport eventBus from \"../../../src/base/EventBus/EventBus\";\nimport peopleCollision from \"./peopleCollision\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class bulletsCollision extends Move {\n\n    // 创建子弹\n    @property(cc.Prefab)\n    bullet: cc.Prefab = null;\n\n    // 怪\n    @property(cc.Prefab)\n    people: cc.Prefab = null;\n\n    data: any[] = [];\n\n    peopleCollision: peopleCollision = new peopleCollision();\n\n    onLoad() {\n        cc.director.getCollisionManager().enabled = true;\n        // cc.director.getCollisionManager().enabledDebugDraw = true;\n        // cc.director.getCollisionManager().enabledDrawBoundingBox = true;\n        // cc.log(cc.find(\"Canvas\").children,55)\n    }\n\n    private _getPeopleSize(): void {\n        eventBus.$on(\"peopleSize\", this._peopleMsg.bind(this))\n    }\n\n    private _peopleMsg(msg: object) {\n        // cc.log(msg)\n        // this.x = msg.x;\n    }\n\n    async onCollisionEnter(other: any, self: any): Promise<any> {\n\n\n        // cc.log(other, '555555555')\n\n\n\n\n        if (other) {\n\n            this.data.push(other)\n            // let collision = \n\n            let temp = cc.instantiate(this.bullet);\n\n            temp.parent = this.node;\n\n            let x, y;\n\n            if (this.data[0].node) {\n                \n                x = this.data[0].node.x;\n\n                y = this.data[0].node.y;\n                \n            }\n\n\n\n            // cc.log(this.data[0].node, x, y, 55222)\n\n            await this._moveTo(1, temp.x + x + this.peopleCollision.x / 2, temp.y + y + this.peopleCollision.y / 2, temp);\n\n            this.scheduleOnce(() => {\n\n                temp.destroy();\n\n            }, 1)\n\n            this.schedule(() => {\n                this.onCollisionEnter(other, self);\n                // cc.log(111)\n            }, 1)\n        } else {\n            this.unschedule(() => {\n                this.onCollisionEnter(other, self);\n                // cc.log(111)\n            })\n        }\n\n\n        // cc.log(other,11)\n\n        // let move = cc.removeSelf();\n\n        // this.node.runAction(move)\n\n        // let x = this.node.x;\n\n        // let y = this.node.y;\n\n        // this._moveTo(1, x + 100, y - 100, this.node);\n    }\n\n    onCollisionExit(other: any, self: any) {\n        // cc.log(other,444)\n    }\n    start() { }\n    update(dt: number) {\n\n    }\n    onDestroy() {\n\n\n    }\n\n\n\n}\n\n"]}