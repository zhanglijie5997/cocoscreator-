{"version":3,"sources":["../../../../../assets/src/scripts/assets/src/scripts/Index.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../assets/src/scripts","sourcesContent":["\r\nimport eventBus from \"../base/EventBus/EventBus\";\r\nimport LoadScene from \"../base/load/LoadScene\";\r\nimport DiaLog from \"../base/dialog/DiaLog\";\r\nimport Move from \"../base/move/Move\";\r\nimport baseScence from '../base/load/baseScence';\r\nimport TouchEvent from '../base/touchEvent/TouchEvent';\r\n\r\n\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Index extends LoadScene {\r\n   \r\n    @property(cc.Label)\r\n    label: cc.Label = null;\r\n\r\n    @property\r\n    text: string = 'hello';\r\n\r\n    @property(cc.Node)\r\n    stopBack:cc.Node = null;\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // 加载提示框\r\n    @property(cc.Prefab)\r\n    loding:cc.Prefab = null;\r\n\r\n\r\n    stop:boolean = false;\r\n\r\n    onLoad () {\r\n        \r\n       let touch = new TouchEvent();\r\n       touch.touch(\"start\")\r\n\r\n        eventBus.$on(\"change\",(msg) => {\r\n            cc.log(msg,'ggg')\r\n        })\r\n        eventBus.$on(\"change1\",this._fn)\r\n        \r\n        this._init(\"Home\");\r\n\r\n        this._init(\"audio/background.mp3\");\r\n        // 播放背景音乐\r\n        this._playBackgroundAudio(\"audio/background.mp3\",\"playMusic\",true,0.5);\r\n\r\n        this._addListrenNode();\r\n\r\n        // 竖屏\r\n        this._addListrenScence();\r\n        let arr = [\"Canvas/header\",\"Canvas/foot\"]\r\n\r\n        this.loadScenece(arr)\r\n    }\r\n\r\n    start () {\r\n\r\n    }\r\n     // update (dt) {}\r\n\r\n    _eventClick(event:CustomEvent) {\r\n        // cc.log(typeof event)\r\n        let self = this;\r\n        let obj = {\r\n            \"stopMusic\":()=>{\r\n                self._playBackgroundAudio(\"audio/background.mp3\",\"resumeMusic\",true,0.5)\r\n            },\r\n            \"resumeMusic\":()=>{\r\n                self._playBackgroundAudio(\"audio/background.mp3\",\"resumeMusic\",true,0.5)\r\n            }\r\n        }\r\n        obj[event + '']()\r\n    }\r\n\r\n    onDestroy() {\r\n        eventBus.$off(\"change\",this._fn)\r\n    }\r\n    private _data():void {\r\n        console.log()\r\n    }\r\n    private _fn(msg) {\r\n        console.log(msg,'ggg')\r\n    }\r\n\r\n    private _scenceSuccess(msg:any) {\r\n        cc.log(msg + '100%','ggg444555')\r\n    }\r\n\r\n\r\n    private _vibrate() {\r\n        if(window.navigator.vibrate) {\r\n            navigator.vibrate([500, 300, 400,300]);\r\n        }else {\r\n            throw new Error(`您的设备不支持震动`)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 监听控制音乐\r\n     */\r\n    private _addListrenNode() {\r\n        let self = this;\r\n        this.stopBack.on(\"click\",function() {\r\n            let dialog = new DiaLog();\r\n            let node = cc.find(\"Canvas\")\r\n            self._vibrate()\r\n            cc.log(1111);\r\n            self.stop = !self.stop;\r\n            cc.log(self.stop,'ggg')\r\n            if(self.stop) {\r\n                self._playBackgroundAudio(\"audio/background.mp3\",\"pauseAllEffects\",true,0.5);\r\n                self._showDiaLog(node);\r\n                let move = new Move();\r\n               \r\n            }else {\r\n                self._playBackgroundAudio(\"audio/background.mp3\",\"resumeAllEffects\",true,1);\r\n                self._showDiaLog(node)\r\n            }\r\n           \r\n        })\r\n    }\r\n\r\n    /**\r\n     * 提示框\r\n     * @param node 插入节点\r\n     */\r\n    public _showDiaLog(node:cc.Node) {\r\n        let self = this;\r\n        let empt = cc.instantiate(this.loding);\r\n        node.addChild(empt);\r\n        empt.destroy()\r\n        /* this.scheduleOnce(()=>{\r\n            empt.active = false;\r\n        },2) */\r\n     }\r\n\r\n\r\n    /**\r\n     * 监听场景是否加载完成\r\n     */\r\n    public _addListrenScence() {\r\n        eventBus.$on(\"scence\",this._scenceSuccess)\r\n    }\r\n\r\n    /**\r\n     * 竖屏适配\r\n     * @param arr 需要适配的节点\r\n     */\r\n    private loadScenece(arr:string[]):void {\r\n        let canvas =new  baseScence();\r\n        // canvas._baseScence(arr,1080)\r\n    }\r\n}\r\n"]}