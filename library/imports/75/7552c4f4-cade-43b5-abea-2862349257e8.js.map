{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\map/assets\\scripts\\map\\peopleMove.ts"],"names":[],"mappings":";;;;;AAAA,2DAAsD;AACtD,6DAAwD;AAElD,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAQ,CAAkB;AAG1C;IAAsC,4BAAS;IAD/C;QAAA,qEA4FC;QA1FG,KAAK;QAEL,WAAK,GAAc,IAAI,CAAC;QAExB,QAAQ;QACR,eAAS,GAAe,IAAI,EAAE,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;QACjD,wBAAwB;QACxB,UAAI,GAAO,IAAI,CAAC;;IAmFpB,CAAC;IAjFG,yBAAM,GAAN;QAEI,SAAS;QACT,IAAI,CAAC,WAAW,EAAE,CAAA;QAClB,cAAc;QAEd,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW,EAAC,GAAG,CAAC,CAAC;QAIpC,IAAI,CAAC,KAAK,CAAC,sBAAsB,CAAC,CAAA;QAGlC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;QAEpB,IAAI,CAAC,eAAe,EAAE,CAAA;QAItB,uDAAuD;IAC3D,CAAC;IAED,wBAAK,GAAL;QACI,oCAAoC;IACxC,CAAC;IAED,iBAAiB;IAEjB,4BAAS,GAAT;QACI,IAAI,CAAC,mBAAmB,EAAE,CAAA;IAC9B,CAAC;IACD,UAAU;IACF,kCAAe,GAAvB;QACI,kBAAQ,CAAC,GAAG,CAAC,QAAQ,EAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAA;IACnD,CAAC;IAEO,2BAAQ,GAAhB,UAAiB,GAAO;QACpB,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,CAAA;IACf,CAAC;IAEO,sCAAmB,GAA3B;QACI,kBAAQ,CAAC,IAAI,CAAC,QAAQ,EAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAA;IACpD,CAAC;IAED,QAAQ;IACA,8BAAW,GAAnB;QACQ,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,IAAI,CAAC,QAAQ,EAAE,CAAA;QACf,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,EAAE,GAAG,CAAC,CAAA;QAClC,IAAG,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,EAAE,EAAE;YAE5B,IAAI,CAAC,sBAAsB,EAAE,CAAA;SAChC;IAET,CAAC;IAED,OAAO;IACC,8BAAW,GAAnB;QAEI,KAAI,IAAI,CAAC,GAAG,CAAC,EAAC,CAAC,GAAC,GAAG,EAAC,CAAC,EAAE,EAAE;YAErB,IAAI,IAAI,GAAG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAEtC,IAAI,CAAC,IAAI,GAAG,CAAC,GAAG,EAAE,CAAC;YAEnB,eAAe;YAEf,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA;SAE3B;IACL,CAAC;IAED,WAAW;IACH,2BAAQ,GAAhB;QAEI,IAAI,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC;QAEpC,QAAQ,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAA;IAC/B,CAAC;IArFD;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;2CACI;IAHP,QAAQ;QAD5B,OAAO;OACa,QAAQ,CA2F5B;IAAD,eAAC;CA3FD,AA2FC,CA3FqC,mBAAS,GA2F9C;kBA3FoB,QAAQ","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\map","sourcesContent":["import LoadScene from \"../../src/base/load/LoadScene\";\r\nimport eventBus from \"../../src/base/EventBus/EventBus\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NewClass extends LoadScene {\r\n    // 敌人\r\n    @property(cc.Prefab)\r\n    enemy: cc.Prefab = null;\r\n\r\n    // 敌人对象池\r\n    enemyPool:cc.NodePool = new cc.NodePool(\"enemy\");\r\n    // LIFE-CYCLE CALLBACKS:\r\n    time:any = null;\r\n\r\n    onLoad () {\r\n\r\n        // 初始化对象池\r\n        this.createEnemy()\r\n        // 每0.5s创建一个敌人\r\n       \r\n        this.schedule(this._scheduleFn,0.8);\r\n\r\n        \r\n\r\n        this._init(\"audio/background.mp3\")\r\n\r\n\r\n        this._init(\"index\");\r\n\r\n        this.preloadCallback()\r\n\r\n        \r\n\r\n        // this._preLoadScence(\"resoures/audio/background.mp3\")\r\n    }\r\n\r\n    start () {\r\n        // this.unschedule(this._scheduleFn)\r\n    }\r\n\r\n    // update (dt) {}\r\n\r\n    onDestroy() {\r\n        this._offPreloadCallback()\r\n    }\r\n    // 预加载资源回调\r\n    private preloadCallback():void {\r\n        eventBus.$on(\"scence\",this._success.bind(this))\r\n    }\r\n\r\n    private _success(msg:any):void {\r\n        cc.log(msg)\r\n    }\r\n\r\n    private _offPreloadCallback():void {\r\n        eventBus.$off(\"scence\",this._success.bind(this))\r\n    }\r\n\r\n    // 定时器回调\r\n    private _scheduleFn():void {\r\n            let self = this;\r\n            this.getEnemy()\r\n            cc.log(this.enemyPool.size() ,777)\r\n            if(this.enemyPool.size() <= 98) {\r\n               \r\n                this.unscheduleAllCallbacks()\r\n            }\r\n\r\n    }\r\n\r\n    // 创建敌人\r\n    private createEnemy(): void {\r\n\r\n        for(var i = 0;i<100;i++) {\r\n\r\n            let temp = cc.instantiate(this.enemy);\r\n\r\n            temp.name = i + '';\r\n\r\n            // cc.log(temp)\r\n\r\n            this.enemyPool.put(temp)\r\n\r\n        }\r\n    }\r\n\r\n    // 从对象池取出敌人\r\n    private getEnemy(): void {\r\n\r\n        let newEnemy = this.enemyPool.get();\r\n\r\n        newEnemy.parent = this.node\r\n    }\r\n\r\n    \r\n}\r\n"]}